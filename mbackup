#!/usr/bin/env bash

cat <<EOF
  ################
  ##  M.BACKUP  ##
  ################
EOF

source "./util.sh"

mkdir ./data &>/dev/null

cat <config | while read -r entry; do
	fll "$(tput cols)" -

	# Comments
	if [[ "${entry:0:1}" == "#" ]]; then continue; fi
	# Empty
	if [[ -z $entry ]]; then continue; fi

	dest=$(serialize "$entry")
	echo ">: $dest"

	# Files
	if [[ -f "$entry" ]]; then
		echo "f: $entry"
		cp "$entry" "$dest"
		continue
	fi

	# Directories
	if [[ -d "$entry" ]]; then
		echo "d: $entry"
		cp -r "$entry" "$dest/"
		continue
	fi
done
